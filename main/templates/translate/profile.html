{% extends 'base.html' %}
{% load static %}
{% block title %}Profile{% endblock%}
{% block css %}
<link rel="stylesheet" href="{% static 'translate/css/profile.css' %}" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
{% endblock %}
{% block content %}
<div class="row main-row">
  <div class="col-md-3" id="side-bar">
    <nav id="profile-nav" class="h-100 pe-4 border-end">
      <div class="mb-4 ps-3">
        <h2 class="fw-bold">Wordistan Profile</h2>
      </div>
      <nav class="nav nav-pills flex-column d-flex flex-grow-1">
        <a class="nav-link active" href="#user-info"><i class="bi bi-house-fill"
            style="margin-right: 0.8rem"></i>Dashboard</a>
        <a class="nav-link mt-2" href="#my-dictionaries"><i class="bi bi-files"
            style="margin-right: 0.8rem"></i>Dictionaries</a>
        <a class="nav-link mt-2" href="#achievements"><i class="bi bi-award-fill"
            style="margin-right: 0.8rem"></i>Achivements</a>
        <a class="nav-link logout-link mt-auto mb-5" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right"
            style="margin-right: 0.8rem"></i>Log Out</a>
      </nav>
    </nav>
  </div>

  <div class="col-md-9">
    <div data-bs-spy="scroll" data-bs-target="#profile-nav" data-bs-smooth-scroll="true" class="scrollspy-example"
      tabindex="0">
      <section id="user-info" class="py-4">
        <div class="row align-items-center">
          <!-- Profile Image -->
          <div class="col-12 col-md-auto text-center text-md-start mb-3 mb-md-0">
            <img src="{% static 'translate/images/animals.jpg' %}" class="rounded-circle shadow-sm" width="100"
              height="100" style="object-fit: cover;" alt="Profile" />
          </div>

          <!-- Name & Email -->
          <div class="col-12 col-md text-center text-md-start mb-3 mb-md-0">
            <h3 class="fw-bold mb-1">{{user.first_name}} {{user.last_name}}</h3>
            <p class="text-muted mb-0"><i class="bi bi-envelope me-2"></i>{{user.email}}</p>
            <div class="mt-2">
              <span class="badge rounded-pill bg-primary bg-opacity-10 text-primary me-1">üî• 7 Days Streak</span>
              <span class="badge rounded-pill bg-warning bg-opacity-10 text-warning text-dark">üèÜ First 100 Words</span>
            </div>
          </div>

          <!-- Stats -->
          <div class="col-12 col-md-auto mt-3 mt-md-0">
            <div class="d-flex justify-content-center justify-content-md-end quick-info-container gap-4">
              <div class="text-center">
                <p class="h4 fw-bold mb-0 text-primary">{{user.translated_words}}</p>
                <small class="text-muted text-uppercase"
                  style="font-size: 0.75rem; letter-spacing: 0.5px;">Translated Words</small>
              </div>
              <div class="vr d-none d-md-block bg-secondary opacity-25"></div>
              <div class="text-center">
                <p class="h4 fw-bold mb-0 text-primary">{{user.dictionaries.count}}</p>
                <small class="text-muted text-uppercase"
                  style="font-size: 0.75rem; letter-spacing: 0.5px;">Dicts</small>
              </div>
              <div class="vr d-none d-md-block bg-secondary opacity-25"></div>
              <div class="text-center">
                <p class="h4 fw-bold mb-0 text-primary">{{user.saved_words}}</p>
                <small class="text-muted text-uppercase"
                  style="font-size: 0.75rem; letter-spacing: 0.5px;">Saved Words</small>
              </div>
              <div class="vr d-none d-md-block bg-secondary opacity-25"></div>
              <div class="text-center">
                <p class="h4 fw-bold mb-0 text-primary">{{user.achievements.count}}</p>
                <small class="text-muted text-uppercase"
                  style="font-size: 0.75rem; letter-spacing: 0.5px;">Achievements</small>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div id="user_informations" class="mb-5">
        <h4 class="mb-4">Account Details</h4>
        <div class="info-card">
          <div class="row g-4">
            <div class="col-12 col-md-6">
              <div class="info-item">
                <p class="info-label">First Name</p>
                <p class="info-value">{{user.first_name}}</p>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="info-item">
                <p class="info-label">Last Name</p>
                <p class="info-value">{{user.last_name}}</p>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="info-item">
                <p class="info-label">Nickname</p>
                <p class="info-value">@{{user.nick_name|default:"-"}}</p>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="info-item">
                <p class="info-label">Date of Birth</p>
                <p class="info-value">{{user.birth_date|default:"-"}}</p>
              </div>
            </div>
            <div class="col-12 pt-2">
              <hr class="text-muted opacity-25 mb-4">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <p class="info-label mb-1">Password</p>
                  <p class="text-muted small mb-0">Last changed: 3 months ago</p>
                </div>
                <button class="btn-change-password">Change Password</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <section id="my-dictionaries" class="py-5">
        <h4>My Dictionaries</h4>
      </section>
      <hr />
      <section id="achievements" class="py-5 border-top">
        <h4>Achievements</h4>
        <div class="row justify-content-center row-cols-1 row-cols-lg-2 g-4" id="achivementRow">
          
        </div>
      </section>
    </div>
  </div>
</div>
{% url 'dict_details' dict_id=0 as base_url_val %}
{{ base_url_val|json_script:"baseurl-data" }}
<script>
  window.imageSrc = "{% static 'translate/images/dictionaryCoverPhoto.jpg' %}"
  window.achivementImgSrc = "{% static 'translate/images/achivement_images/' %}"
</script>
<script src="{% static 'translate/scripts/profile.js' %}"></script>
{% endblock %}